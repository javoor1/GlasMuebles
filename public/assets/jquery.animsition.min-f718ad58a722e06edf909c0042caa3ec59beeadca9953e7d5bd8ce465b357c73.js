!function(p){"use strict";var v="animsition",f={init:function(t){return t=p.extend({inClass:"fade-in",outClass:"fade-out",inDuration:1500,outDuration:800,linkElement:".animsition-link",loading:!0,loadingParentElement:"body",loadingClass:"animsition-loading",unSupportCss:["animation-duration","-webkit-animation-duration","-o-animation-duration"],overlay:!1,overlayClass:"animsition-overlay-slide",overlayParentElement:"body"},t),!1===f.supportCheck.call(this,t)?("console"in window||(window.console={},window.console.log=function(n){return n}),console.log("Animsition does not support this browser."),f.destroy.call(this)):(!0===f.optionCheck.call(this,t)&&f.addOverlay.call(this,t),!0===t.loading&&f.addLoading.call(this,t),this.each(function(){var i=this,n=p(this),a=p(window);n.data(v)||(t=p.extend({},t),n.data(v,{options:t}),a.on("load."+v+" pageshow."+v,function(){f.pageIn.call(i)}),a.on("unload."+v,function(){}),p(t.linkElement).on("click."+v,function(n){n.preventDefault();var a=p(this);f.pageOut.call(i,a)}))}))},addOverlay:function(n){p(n.overlayParentElement).prepend('<div class="'+n.overlayClass+'"></div>')},addLoading:function(n){p(n.loadingParentElement).append('<div class="'+n.loadingClass+'"></div>')},removeLoading:function(){var n=p(this).data(v).options;p(n.loadingParentElement).children("."+n.loadingClass).fadeOut().remove()},supportCheck:function(n){var a=p(this),i=n.unSupportCss,t=i.length,o=!1;0===t&&(o=!0);for(var e=0;e<t;e++)if("string"==typeof a.css(i[e])){o=!0;break}return o},optionCheck:function(n){var a=p(this);return!(!n.overlay&&!a.data("animsition-overlay"))},animationCheck:function(n,a,i){var t=p(this).data(v).options,o=typeof n,e=!a&&"number"===o,s=a&&"string"===o&&0<n.length;return e||s?n=n:a&&i?n=t.inClass:!a&&i?n=t.inDuration:a&&!i?n=t.outClass:a||i||(n=t.outDuration),n},pageIn:function(){var n=this,a=p(this),i=a.data(v).options,t=a.data("animsition-in-duration"),o=a.data("animsition-in"),e=f.animationCheck.call(n,t,!1,!0),s=f.animationCheck.call(n,o,!0,!0),l=f.optionCheck.call(n,i);i.loading&&f.removeLoading.call(n),l?f.pageInOverlay.call(n,s,e):f.pageInBasic.call(n,s,e)},pageInBasic:function(n,a){var i=p(this);i.css({"animation-duration":a/1e3+"s"}).addClass(n).animateCallback(function(){i.removeClass(n).css({opacity:1})})},pageInOverlay:function(n,a){var i=p(this),t=i.data(v).options;i.css({opacity:1}),p(t.overlayParentElement).children("."+t.overlayClass).css({"animation-duration":a/1e3+"s"}).addClass(n)},pageOut:function(n){var a=this,i=p(this),t=i.data(v).options,o=n.data("animsition-out"),e=i.data("animsition-out"),s=n.data("animsition-out-duration"),l=i.data("animsition-out-duration"),r=o||e,c=s||l,d=f.animationCheck.call(a,r,!0,!1),u=f.animationCheck.call(a,c,!1,!1),h=f.optionCheck.call(a,t),m=n.attr("href");h?f.pageOutOverlay.call(a,d,u,m):f.pageOutBasic.call(a,d,u,m)},pageOutBasic:function(n,a,i){p(this).css({"animation-duration":a/1e3+"s"}).addClass(n).animateCallback(function(){location.href=i})},pageOutOverlay:function(n,a,i){var t=this,o=p(this),e=o.data(v).options,s=o.data("animsition-in"),l=f.animationCheck.call(t,s,!0,!0);p(e.overlayParentElement).children("."+e.overlayClass).css({"animation-duration":a/1e3+"s"}).removeClass(l).addClass(n).animateCallback(function(){o.css({opacity:0}),location.href=i})},destroy:function(){return this.each(function(){var n=p(this);p(window).unbind("."+v),n.css({opacity:1}).removeData(v)})}};p.fn.animateCallback=function(n){var a="animationend webkitAnimationEnd mozAnimationEnd oAnimationEnd MSAnimationEnd";return this.each(function(){p(this).bind(a,function(){return p(this).unbind(a),n.call(this)})})},p.fn.animsition=function(n){return f[n]?f[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void p.error("Method "+n+" does not exist on jQuery."+v):f.init.apply(this,arguments)}}(jQuery);